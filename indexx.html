<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Diesel Fuel System Schematic</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and Babel CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Style Section -->
    <style>
        @keyframes flow-move {
            to { stroke-dashoffset: -100; }
        }
        @keyframes flow-move-reverse {
            to { stroke-dashoffset: 100; }
        }
        .animate-flow-slow {
            animation: flow-move 10s linear infinite;
        }
        .animate-flow-fast {
            animation: flow-move 3.5s linear infinite;
        }
        .animate-flow-reverse {
            animation: flow-move-reverse 15s linear infinite;
        }
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
            animation: spin-slow 12s linear infinite;
        }
        body {
            background-color: #020617;
            color: #e2e8f0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .part-label {
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [flowActive, setFlowActive] = useState(true);
            const [selectedPart, setSelectedPart] = useState(null);
            const [pistonPos, setPistonPos] = useState(0);

            useEffect(() => {
                let interval;
                if (flowActive) {
                    interval = setInterval(() => {
                        setPistonPos(prev => (prev + 5) % 360);
                    }, 30);
                }
                return () => clearInterval(interval);
            }, [flowActive]);

            const components = {
                tank: { 
                    name: "Fuel Tank (ফুয়েল ট্যাংক)", 
                    desc: "এটি ডিজেল সংরক্ষণের প্রধান আধার। এখান থেকেই পুরো সিস্টেমে ফুয়েল সরবরাহ শুরু হয়। ট্যাংকের ভেতরে একটি প্রাইমারি ফিল্টার থাকে যা বড় ময়লা আটকে দেয়।", 
                    color: "#3b82f6" 
                },
                feedPump: { 
                    name: "Fuel Feed Pump (ফুয়েল ফিড পাম্প)", 
                    desc: "এই পাম্পটি ট্যাংক থেকে ডিজেল টেনে এনে ফিল্টারের দিকে পাঠায়। এটি সাধারণত ৩-৫ বার চাপে ফুয়েল সরবরাহ করে।", 
                    color: "#22c55e" 
                },
                filter: { 
                    name: "Fuel Filter (ফুয়েল ফিল্টার)", 
                    desc: "ডিজেল থেকে ধূলিকণা এবং পানি আলাদা করে পরিষ্কার ডিজেল হাই প্রেসার পাম্পে পাঠায়।", 
                    color: "#eab308" 
                },
                hpPump: { 
                    name: "High Pressure Pump (হাই প্রেসার পাম্প)", 
                    desc: "এটি ডিজেলকে সংকুচিত করে ১০০০ থেকে ২০০০ বার পর্যন্ত প্রচণ্ড চাপ তৈরি করে কমন রেলে পাঠায়।", 
                    color: "#ef4444" 
                },
                rail: { 
                    name: "Common Rail (কমন রেল)", 
                    desc: "উচ্চ চাপের ফুয়েল জমা রাখার পাইপ। এখান থেকেই সব ইনজেক্টরে সমান চাপে ডিজেল যায়।", 
                    color: "#9333ea" 
                },
                ecu: { 
                    name: "ECU (Control Unit)", 
                    desc: "ইঞ্জিনের মস্তিষ্ক। এটি ঠিক করে কখন এবং কতটুকু ফুয়েল সিলিন্ডারে ইনজেক্ট করতে হবে।", 
                    color: "#475569" 
                },
                injectors: { 
                    name: "Injectors (ইনজেক্টর)", 
                    desc: "সিলিন্ডারের ভেতর কুয়াশার মতো ডিজেল স্প্রে করে। এর মাধ্যমে কম্বাশন শুরু হয়।", 
                    color: "#f97316" 
                }
            };

            const toggleFlow = () => setFlowActive(!flowActive);

            const getPistonData = (cylinderNum) => {
                const offsets = [0, 270, 90, 180];
                const offset = offsets[cylinderNum - 1];
                const angle = (pistonPos + offset) * (Math.PI / 180);
                const y = 180 + Math.sin(angle) * 30;
                const isAtTop = Math.sin(angle) < -0.92; 
                return { y, isInjecting: flowActive && isAtTop };
            };

            return (
                <div className="min-h-screen p-4 md:p-8">
                    <div className="max-w-6xl mx-auto">
                        <header className="flex flex-col md:flex-row justify-between items-center mb-8 bg-slate-900/50 p-6 rounded-[32px] border border-slate-800 backdrop-blur-md">
                            <div className="flex items-center gap-5">
                                <div className={`p-3 rounded-2xl bg-red-500/10 ${flowActive ? 'animate-pulse' : ''}`}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={`text-red-500 ${flowActive ? 'animate-spin-slow' : ''}`}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                                </div>
                                <div>
                                    <h1 className="text-2xl md:text-3xl font-bold text-white tracking-tight">Advanced Diesel Fuel System</h1>
                                    <p className="text-sm text-slate-500 font-medium uppercase tracking-widest mt-1">Interactive schematic • Firing Sequence 1-3-4-2</p>
                                </div>
                            </div>
                            
                            <div className="mt-6 md:mt-0 flex items-center gap-6">
                                <div className="text-right hidden sm:block border-r border-slate-800 pr-6 mr-2">
                                    <p className="text-xs text-slate-500 uppercase font-bold mb-1">Engine State</p>
                                    <p className={`text-base font-mono font-bold ${flowActive ? 'text-green-500' : 'text-red-500'}`}>
                                        {flowActive ? 'RUNNING' : 'STOPPED'}
                                    </p>
                                </div>
                                <button 
                                    onClick={toggleFlow}
                                    className={`px-8 py-3 rounded-2xl font-bold transition-all active:scale-95 shadow-xl text-base ${flowActive ? 'bg-red-600 hover:bg-red-700 text-white' : 'bg-emerald-600 hover:bg-emerald-700 text-white'}`}
                                >
                                    {flowActive ? 'Stop Engine' : 'Start Engine'}
                                </button>
                            </div>
                        </header>

                        <div className="grid grid-cols-1 lg:grid-cols-4 gap-8 mb-10">
                            <div className="lg:col-span-3 bg-slate-900/30 rounded-[48px] p-6 md:p-10 border border-slate-800 shadow-2xl relative overflow-hidden min-h-[550px]">
                                <svg viewBox="0 0 800 500" className="w-full h-full">
                                    {/* স্ট্যাটিক পাইপলাইন */}
                                    <g stroke="#1e293b" strokeWidth="8" fill="none" strokeLinecap="round">
                                        <path d="M 80 400 H 180" /> 
                                        <path d="M 220 400 H 300" /> 
                                        <path d="M 340 400 H 450 V 330" /> 
                                        <path d="M 450 250 V 85" /> 
                                        <path d="M 250 85 H 550" /> 
                                    </g>

                                    {/* ডায়নামিক ফ্লো */}
                                    {flowActive && (
                                        <g fill="none" strokeWidth="3" strokeDasharray="10,15" strokeLinecap="round">
                                            <path d="M 80 400 H 180" stroke="#3b82f6" className="animate-flow-slow" />
                                            <path d="M 220 400 H 300" stroke="#22c55e" className="animate-flow-slow" />
                                            <path d="M 340 400 H 450 V 330" stroke="#eab308" className="animate-flow-slow" />
                                            <path d="M 450 250 V 85" stroke="#ef4444" strokeWidth="4" className="animate-flow-fast" />
                                        </g>
                                    )}

                                    {/* সিলিন্ডার ও পিস্টন */}
                                    {[250, 350, 450, 550].map((x, i) => {
                                        const cylNum = i + 1;
                                        const { y, isInjecting } = getPistonData(cylNum);
                                        return (
                                            <g key={i}>
                                                <text x={x} y="275" textAnchor="middle" className="text-[14px] fill-blue-400 font-bold uppercase">Cyl {cylNum}</text>
                                                <rect x={x - 28} y="150" width="56" height="100" rx="6" fill="#0f172a" stroke="#334155" strokeWidth="2" />
                                                <rect x={x - 25} y={y} width="50" height="35" rx="3" fill="#475569" stroke="#1e293b" />
                                                <path d={`M ${x} 85 V 130`} stroke="#1e293b" strokeWidth="8" fill="none" />
                                                {flowActive && <path d={`M ${x} 85 V 130`} stroke="#ef4444" strokeWidth="2" className="animate-flow-fast" strokeDasharray="5,5" />}
                                                
                                                {isInjecting && (
                                                    <g className="animate-pulse">
                                                        <path d={`M ${x} 130 L ${x-20} 165 L ${x+20} 165 Z`} fill="url(#mistGradient)" />
                                                        <circle cx={x} cy="155" r="12" fill="rgba(255, 100, 0, 0.4)" />
                                                    </g>
                                                )}
                                                <path d={`M ${x} 115 H ${x+15} V 45`} stroke="#475569" strokeWidth="2" fill="none" strokeDasharray="5,3" />
                                            </g>
                                        );
                                    })}

                                    {/* রিটার্ন লাইন */}
                                    <g fill="none" strokeLinecap="round">
                                        <path d="M 262 45 H 600" stroke="#334155" strokeWidth="2.5" strokeDasharray="6,4" />
                                        <path d="M 550 85 H 600" stroke="#1e293b" strokeWidth="6" />
                                        {flowActive && <path d="M 550 85 H 600" stroke="#64748b" strokeWidth="2" strokeDasharray="8,8" className="animate-flow-reverse" />}
                                        <path d="M 480 280 H 600" stroke="#334155" strokeWidth="2.5" strokeDasharray="6,4" />
                                        <path d="M 600 45 V 450 H 60 V 430" stroke="#1e293b" strokeWidth="7" />
                                        {flowActive && <path d="M 600 45 V 450 H 60 V 430" stroke="#64748b" strokeWidth="2" strokeDasharray="12,12" className="animate-flow-reverse" />}
                                    </g>

                                    {/* কম্পোনেন্ট ও নামসমূহ */}
                                    <g className="cursor-pointer group" onClick={() => setSelectedPart('tank')}>
                                        <rect x="38" y="378" width="44" height="44" rx="10" fill="#1e293b" stroke="#3b82f6" strokeWidth="2" />
                                        <text x="60" y="445" textAnchor="middle" className="part-label fill-blue-400">FUEL TANK</text>
                                    </g>

                                    <g className="cursor-pointer group" onClick={() => setSelectedPart('feedPump')}>
                                        <circle cx="200" cy="400" r="22" fill="#1e293b" stroke="#22c55e" strokeWidth="2" />
                                        <text x="200" y="445" textAnchor="middle" className="part-label fill-green-400">FEED PUMP</text>
                                    </g>

                                    <g className="cursor-pointer group" onClick={() => setSelectedPart('filter')}>
                                        <rect x="298" y="378" width="44" height="44" rx="10" fill="#1e293b" stroke="#eab308" strokeWidth="2" />
                                        <text x="320" y="445" textAnchor="middle" className="part-label fill-yellow-500">FUEL FILTER</text>
                                    </g>

                                    <g className="cursor-pointer group" onClick={() => setSelectedPart('hpPump')}>
                                        <rect x="420" y="250" width="60" height="80" rx="12" fill="#1e293b" stroke="#ef4444" strokeWidth="3" />
                                        <text x="450" y="348" textAnchor="middle" className="part-label fill-red-500">HP PUMP</text>
                                    </g>

                                    <g className="cursor-pointer group" onClick={() => setSelectedPart('rail')}>
                                        <rect x="230" y="70" width="340" height="30" rx="15" fill="#1e293b" stroke="#9333ea" strokeWidth="2" />
                                        <text x="400" y="60" textAnchor="middle" className="part-label fill-purple-300">COMMON RAIL (HIGH PRESSURE)</text>
                                    </g>

                                    <g className="cursor-pointer group" onClick={() => setSelectedPart('ecu')}>
                                        <rect x="710" y="220" width="50" height="50" rx="12" fill="#1e293b" stroke="#6366f1" strokeWidth="2" />
                                        <text x="735" y="288" textAnchor="middle" className="part-label fill-indigo-400">ECU UNIT</text>
                                    </g>

                                    {/* রিটার্ন লাইনের নাম */}
                                    <text x="640" y="465" textAnchor="middle" className="part-label fill-slate-500 italic">Fuel Return Line</text>

                                    <defs>
                                        <linearGradient id="mistGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                            <stop offset="0%" stopColor="rgba(249, 115, 22, 0.9)" />
                                            <stop offset="100%" stopColor="rgba(249, 115, 22, 0)" />
                                        </linearGradient>
                                    </defs>
                                </svg>

                                {selectedPart && (
                                    <div className="absolute top-10 right-10 w-full md:w-80 bg-slate-900/95 p-6 rounded-[32px] border border-blue-500/30 backdrop-blur-xl shadow-2xl">
                                        <div className="flex justify-between items-start mb-4">
                                            <h3 className="font-bold text-lg text-blue-400 flex items-center gap-2">
                                                <div className="w-2.5 h-2.5 rounded-full bg-blue-500 animate-pulse"></div>
                                                {components[selectedPart].name}
                                            </h3>
                                            <button onClick={() => setSelectedPart(null)} className="text-slate-500 hover:text-white bg-slate-800 p-1.5 rounded-full">✕</button>
                                        </div>
                                        <p className="text-sm text-slate-300 leading-relaxed font-medium">
                                            {components[selectedPart].desc}
                                        </p>
                                    </div>
                                )}
                            </div>

                            <div className="space-y-6">
                                <div className="bg-slate-900/50 p-6 rounded-[32px] border border-slate-800 shadow-xl">
                                    <h3 className="text-sm font-bold mb-4 flex items-center gap-2 text-blue-400 uppercase tracking-widest underline underline-offset-8 decoration-blue-500/30">
                                        Engine Timing
                                    </h3>
                                    <div className="flex flex-col gap-4">
                                        <div className="flex justify-between items-center bg-slate-950 p-3 rounded-2xl border border-slate-800">
                                          <span className="text-xs uppercase font-bold text-slate-500">Firing Order</span>
                                          <span className="text-lg font-mono font-bold text-blue-400 tracking-widest underline">1-3-4-2</span>
                                        </div>
                                        <p className="text-xs text-slate-400 italic leading-relaxed">
                                            সিলিন্ডারগুলো এই নির্দিষ্ট ক্রমানুসারে (Firing Order) ফায়ার করে যাতে ইঞ্জিন স্মুথলি চলে।
                                        </p>
                                    </div>
                                </div>

                                <div className="bg-slate-900/50 p-6 rounded-[32px] border border-slate-800 shadow-xl">
                                    <h3 className="text-sm font-bold mb-4 flex items-center gap-2 text-emerald-400 uppercase tracking-widest underline underline-offset-8 decoration-emerald-500/30">
                                        Live Diagnostics
                                    </h3>
                                    <div className="space-y-4">
                                        <div className="flex justify-between items-end border-b border-slate-800 pb-2">
                                          <span className="text-xs text-slate-500 font-bold uppercase">Rail Pressure</span>
                                          <span className={`text-lg font-mono font-bold ${flowActive ? 'text-red-500' : 'text-slate-700'}`}>
                                            {flowActive ? '1,840 Bar' : '0 Bar'}
                                          </span>
                                        </div>
                                        <div className="flex justify-between items-end">
                                          <span className="text-xs text-slate-500 font-bold uppercase">Return State</span>
                                          <span className={`text-base font-mono font-bold ${flowActive ? 'text-blue-400' : 'text-slate-700'}`}>
                                            {flowActive ? 'ACTIVE' : 'IDLE'}
                                          </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mt-10">
                            <section className="bg-slate-900/50 p-8 rounded-[40px] border border-slate-800 shadow-xl">
                                <h2 className="text-xl font-bold mb-6 text-white">কার্যপদ্ধতি ও পার্টসের নাম</h2>
                                <div className="space-y-5 text-sm md:text-base text-slate-400 leading-relaxed">
                                    <p><strong className="text-blue-400">Fuel Tank:</strong> ডিজেল জমা রাখে।</p>
                                    <p><strong className="text-green-500">Feed Pump:</strong> ট্যাংক থেকে ফুয়েল টানে।</p>
                                    <p><strong className="text-yellow-500">Filter:</strong> ময়লা ও পানি পরিষ্কার করে।</p>
                                    <p><strong className="text-red-500">HP Pump:</strong> উচ্চ চাপ (High Pressure) তৈরি করে।</p>
                                    <p><strong className="text-purple-400">Common Rail:</strong> সব ইনজেক্টরে ফুয়েল বিতরণ করে।</p>
                                    <p><strong className="text-orange-400">Injectors:</strong> সিলিন্ডারে ডিজেল স্প্রে করে।</p>
                                </div>
                            </section>

                            <section className="bg-slate-900/50 p-8 rounded-[40px] border border-slate-800 shadow-xl">
                                <h2 className="text-xl font-bold mb-6 text-white">গুরুত্বপূর্ণ তথ্য</h2>
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs">
                                    <div className="bg-slate-950 p-4 rounded-2xl border border-slate-800">
                                        <p className="text-blue-400 font-bold mb-1">প্রেশার লিমিট</p>
                                        <p>এইচপি পাম্প ২০০০ বার পর্যন্ত চাপ দিতে পারে।</p>
                                    </div>
                                    <div className="bg-slate-950 p-4 rounded-2xl border border-slate-800">
                                        <p className="text-red-400 font-bold mb-1">রিটার্ন লাইন</p>
                                        <p>অতিরিক্ত গরম ডিজেল ট্যাংকে ফিরে যায় ঠান্ডা হওয়ার জন্য।</p>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>